function tpgbInitMap(){"use strict";jQuery(document).ready(function(){var r=jQuery,e=document.querySelectorAll(".tpgb-adv-map");Array.prototype.forEach.call(e,function(e){var t,n=r(e),a=n.data("id"),o=n.data("map-settings"),s=null,l=null,d=null,i=null;n.hasClass("map-loaded")||(e=function(){!function(){for(var e=0,n=t.length;e<n;e++)t[e]()}()},(t=[]).push(function(){var e,n;for("",l=new google.maps.LatLngBounds,s=new google.maps.Map(document.getElementById(a),o.options),d=new google.maps.InfoWindow,s.setTilt(45),google.maps.event.addListener(d,"domready",function(){var e=r(".gm-style-iw");e.prev();e.parent("div").addClass("marker-icon"),e.next().hide(),e.addClass("marker-title")}),n=0;n<o.places.length;n++)i=new google.maps.LatLng(o.places[n].latitude,o.places[n].longitude),l.extend(i),e=new google.maps.Marker({position:i,map:s,title:o.places[n].address,icon:o.places[n].pin_icon}),google.maps.event.addListener(e,"click",function(e,n){return function(){1<o.places[n].address.length&&d.setContent('<div class="gmap_info_content"><p>'+o.places[n].address+"</p></div>"),d.open(s,e)}}(e,n)),s.fitBounds(l);var t=google.maps.event.addListener(s,"idle",function(e){this.setZoom(o.options.zoom),google.maps.event.removeListener(t)});google.maps.event.trigger(s,"resize"),s.setCenter(i)}),e(),n.addClass("map-loaded"))})})}